"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[835],{835:(e,d,c)=>{c.r(d),c.d(d,{default:()=>v});var s=c(5043),r=c(3519),o=c(8628),a=c(1072),n=c(8602),l=c(4282),t=c(3814),i=c(4196),u=c(7491),h=c(5284),x=c(1894);var m=c(579);const j=[{cod:"AA",desc:"Aceros Arequipa"},{cod:"SP",desc:"SiderPeru"},{cod:"M4",desc:"Miromina"},{cod:"PR",desc:"Prodac"},{cod:"ZZ",desc:"Otra"}],p=[{cod:"1",desc:"Aceros Arequipa"},{cod:"2",desc:"SiderPeru"},{cod:"3",desc:"Miromina"},{cod:"4",desc:"Prodac"},{cod:"99",desc:"Otra"}],A=[{cod:"NIU",desc:"Unidad (NIU)"},{cod:"BX",desc:"Caja (BX)"},{cod:"UND",desc:"Unidad (Und)"},{cod:"VAR",desc:"Varilla (Var)"},{cod:"PAQ",desc:"Paquete (Paqu)"},{cod:"RLL",desc:"Rollo (Rll)"},{cod:"MLL",desc:"Millar (Mll)"},{cod:"MT3",desc:"Metro Cubico (Mt3)"},{cod:"TM",desc:"Tonelada (Tm)"},{cod:"OTR",desc:"Otra (Otr)"}],_=[{cod:"01",desc:"Acero"},{cod:"02",desc:"Cemento"},{cod:"03",desc:"Alambres"},{cod:"04",desc:"Clavos"},{cod:"05",desc:"Piedras"},{cod:"06",desc:"Agregados"},{cod:"99",desc:"Otra"}],v=()=>{const[e,d]=(0,s.useState)([]),[c,v]=(0,s.useState)(1),[g]=(0,s.useState)(20),[b,C]=(0,s.useState)({cod_producto:"",des_corta:"",des_producto:"",des_marca:"",num_proveedor:"",cod_unidad:"",cod_categoria:""}),[N,y]=(0,s.useState)(!1),[f,L]=(0,s.useState)(!1),[P,S]=(0,s.useState)(!1),[k,I]=(0,s.useState)(null);(0,s.useEffect)((()=>{G()}),[]);const G=async()=>{const e=await(async()=>(0,x.A)("/api/v1/almacen/productos"))();d(e)},M=e=>{const{name:d,value:c}=e.target;C({...b,[d]:c})},E=()=>!b.cod_producto||b.cod_producto.length<1||b.cod_producto.length>5?(alert("El c\xf3digo de producto debe tener entre 1 y 5 caracteres"),!1):!b.des_corta||b.des_corta.length>20?(alert("La descripci\xf3n corta es obligatoria y no debe exceder 20 caracteres"),!1):b.cod_unidad?!(b.des_producto&&b.des_producto.length>100)||(alert("La descripci\xf3n no debe exceder 100 caracteres"),!1):(alert("La unidad es obligatoria"),!1),w=()=>{y(!1),C({cod_producto:"",des_corta:"",des_producto:"",des_marca:"",num_proveedor:"",cod_unidad:"",cod_categoria:""})},T=()=>{L(!1),C({cod_producto:"",des_corta:"",des_producto:"",des_marca:"",num_proveedor:"",cod_unidad:"",cod_categoria:""})},R=()=>S(!1),q=e=>{const d=j.find((d=>d.cod===e));return d?d.desc:e},B=e=>{const d=p.find((d=>d.cod===String(e)));return d?d.desc:e},U=e=>{const d=_.find((d=>d.cod===e));return d?d.desc:e},D=e=>{const d=A.find((d=>d.cod===e));return d?d.desc:e},O=c*g,F=O-g,H=e.slice(F,O),$=Math.ceil(e.length/g),z=e=>{v(e)};return(0,m.jsxs)(r.A,{fluid:!0,className:"p-0",children:[(0,m.jsx)(o.A,{children:(0,m.jsxs)(o.A.Body,{className:"p-3",children:[(0,m.jsx)(o.A.Title,{className:"mb-3",children:"Productos"}),(0,m.jsx)(a.A,{className:"mb-3",children:(0,m.jsxs)(n.A,{xs:12,md:6,className:"d-flex align-items-center justify-content-start mb-2 mb-md-0",children:[(0,m.jsx)(l.A,{id:"agregarProducto",className:"mr-2",onClick:()=>y(!0),title:"Agregar",children:(0,m.jsx)("i",{className:"fa fa-plus"})}),(0,m.jsx)(t.A.Group,{className:"flex-grow-1",children:(0,m.jsx)(t.A.Control,{type:"text",placeholder:"Buscar",id:"txtBuscar",className:"rounded"})}),(0,m.jsx)(l.A,{type:"button",className:"btn btn-secondary ml-2",title:"Filtrar",children:(0,m.jsx)("i",{className:"fa fa-search"})})]})}),(0,m.jsxs)("div",{className:"table-responsive",id:"tabProducto",children:[(0,m.jsxs)(i.A,{children:[(0,m.jsx)("caption",{children:"Tabla de Productos"}),(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"#"}),(0,m.jsx)("th",{children:"Opciones"}),(0,m.jsx)("th",{children:"Cod"}),(0,m.jsx)("th",{children:"Desc Corta"}),(0,m.jsx)("th",{children:"Descripci\xf3n"}),(0,m.jsx)("th",{children:"Marca"}),(0,m.jsx)("th",{children:"Proveedor"}),(0,m.jsx)("th",{children:"Unidad"}),(0,m.jsx)("th",{children:"Categor\xeda"})]})}),(0,m.jsx)("tbody",{children:H.map(((e,d)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:F+d+1}),(0,m.jsx)("td",{children:(0,m.jsxs)("div",{className:"btn-group",role:"group",children:[(0,m.jsxs)(l.A,{type:"button",className:"btn btn-secondary btn-sm mb-1",title:"Editar",onClick:()=>(e=>{I(e),C({cod_producto:e.cod_producto,des_corta:e.des_corta,des_producto:e.des_producto,des_marca:e.des_marca,num_proveedor:e.num_proveedor,cod_unidad:e.cod_unidad,cod_categoria:e.cod_categoria}),L(!0)})(e),children:[" ",(0,m.jsx)("i",{className:"fa fa-pencil"})]}),(0,m.jsxs)(l.A,{type:"button",className:"btn btn-danger btn-sm mb-1 ml-1",title:"Eliminar",onClick:()=>(e=>{I(e),S(!0)})(e),children:[" ",(0,m.jsx)("i",{className:"fa fa-trash-o"})]})]})}),(0,m.jsx)("td",{children:e.cod_producto}),(0,m.jsx)("td",{children:e.des_corta}),(0,m.jsx)("td",{children:e.des_producto}),(0,m.jsx)("td",{children:q(e.des_marca)}),(0,m.jsx)("td",{children:B(e.num_proveedor)}),(0,m.jsx)("td",{children:D(e.cod_unidad)}),(0,m.jsx)("td",{children:U(e.cod_categoria)})]},d)))})]}),$>1&&(0,m.jsx)("div",{className:"d-flex justify-content-center mt-3",children:(0,m.jsxs)(u.A,{children:[(0,m.jsx)(u.A.First,{onClick:()=>z(1),disabled:1===c}),(0,m.jsx)(u.A.Prev,{onClick:()=>z(c-1),disabled:1===c}),[...Array($)].map(((e,d)=>(0,m.jsx)(u.A.Item,{active:d+1===c,onClick:()=>z(d+1),children:d+1},d+1))),(0,m.jsx)(u.A.Next,{onClick:()=>z(c+1),disabled:c===$}),(0,m.jsx)(u.A.Last,{onClick:()=>z($),disabled:c===$})]})})]})]})}),(0,m.jsxs)(h.A,{show:N,onHide:w,size:"lg",children:[(0,m.jsx)(h.A.Header,{closeButton:!0,children:(0,m.jsx)(h.A.Title,{children:"Registrar Producto"})}),(0,m.jsxs)(t.A,{id:"formRegistro",autoComplete:"off",onSubmit:async e=>{e.preventDefault(),E()&&(await(async e=>(0,x.A)("/api/v1/almacen/productos","POST",e))(b),G(),w())},children:[(0,m.jsx)(h.A.Body,{children:(0,m.jsxs)(a.A,{children:[(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"cod_producto",children:[(0,m.jsx)(t.A.Label,{children:"C\xf3digo de Producto"}),(0,m.jsx)(t.A.Control,{type:"text",name:"cod_producto",value:b.cod_producto,onChange:M,required:!0,maxLength:5,minLength:1})]})}),(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"des_corta",children:[(0,m.jsx)(t.A.Label,{children:"Descripci\xf3n Corta"}),(0,m.jsx)(t.A.Control,{type:"text",name:"des_corta",value:b.des_corta,onChange:M,required:!0,maxLength:20})]})}),(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"des_producto",children:[(0,m.jsx)(t.A.Label,{children:"Descripci\xf3n del Producto"}),(0,m.jsx)(t.A.Control,{type:"text",name:"des_producto",value:b.des_producto,onChange:M,maxLength:100})]})}),(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"des_marca",children:[(0,m.jsx)(t.A.Label,{children:"Marca"}),(0,m.jsxs)(t.A.Select,{name:"des_marca",value:b.des_marca,onChange:M,children:[(0,m.jsx)("option",{value:"",children:"Seleccione una marca"}),j.map((e=>(0,m.jsx)("option",{value:e.cod,children:e.desc},e.cod)))]})]})}),(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"num_proveedor",children:[(0,m.jsx)(t.A.Label,{children:"Proveedor"}),(0,m.jsxs)(t.A.Select,{name:"num_proveedor",value:b.num_proveedor,onChange:M,children:[(0,m.jsx)("option",{value:"",children:"Seleccione un proveedor"}),p.map((e=>(0,m.jsx)("option",{value:e.cod,children:e.desc},e.cod)))]})]})}),(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"cod_unidad",children:[(0,m.jsx)(t.A.Label,{children:"Unidad"}),(0,m.jsxs)(t.A.Select,{name:"cod_unidad",value:b.cod_unidad,onChange:M,required:!0,children:[(0,m.jsx)("option",{value:"",children:"Seleccione una unidad"}),A.map((e=>(0,m.jsx)("option",{value:e.cod,children:e.desc},e.cod)))]})]})}),(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"cod_categoria",children:[(0,m.jsx)(t.A.Label,{children:"Categor\xeda"}),(0,m.jsxs)(t.A.Select,{name:"cod_categoria",value:b.cod_categoria,onChange:M,children:[(0,m.jsx)("option",{value:"",children:"Seleccione una categor\xeda"}),_.map((e=>(0,m.jsx)("option",{value:e.cod,children:e.desc},e.cod)))]})]})})]})}),(0,m.jsxs)(h.A.Footer,{children:[(0,m.jsx)(l.A,{type:"submit",variant:"outline-primary",children:" Registrar "}),(0,m.jsx)(l.A,{variant:"outline-secondary",onClick:w,children:" Cancelar "})]})]})]}),(0,m.jsxs)(h.A,{show:f,onHide:T,size:"lg",children:[(0,m.jsx)(h.A.Header,{closeButton:!0,children:(0,m.jsx)(h.A.Title,{children:"Editar Producto"})}),(0,m.jsxs)(t.A,{id:"formEditar",autoComplete:"off",onSubmit:async e=>{e.preventDefault(),E()&&(await(async(e,d)=>(0,x.A)(`/api/v1/almacen/productos/${e}`,"PUT",d))(k.num_producto,b),G(),T())},children:[(0,m.jsx)(h.A.Body,{children:(0,m.jsxs)(a.A,{children:[(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"cod_producto",children:[(0,m.jsx)(t.A.Label,{children:"C\xf3digo de Producto"}),(0,m.jsx)(t.A.Control,{type:"text",name:"cod_producto",value:b.cod_producto,onChange:M,required:!0,maxLength:5,minLength:1})]})}),(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"des_corta",children:[(0,m.jsx)(t.A.Label,{children:"Descripci\xf3n Corta"}),(0,m.jsx)(t.A.Control,{type:"text",name:"des_corta",value:b.des_corta,onChange:M,required:!0,maxLength:20})]})}),(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"des_producto",children:[(0,m.jsx)(t.A.Label,{children:"Descripci\xf3n del Producto"}),(0,m.jsx)(t.A.Control,{type:"text",name:"des_producto",value:b.des_producto,onChange:M,maxLength:100})]})}),(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"des_marca",children:[(0,m.jsx)(t.A.Label,{children:"Marca"}),(0,m.jsxs)(t.A.Select,{name:"des_marca",value:b.des_marca,onChange:M,children:[(0,m.jsx)("option",{value:"",children:"Seleccione una marca"}),j.map((e=>(0,m.jsx)("option",{value:e.cod,children:e.desc},e.cod)))]})]})}),(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"num_proveedor",children:[(0,m.jsx)(t.A.Label,{children:"Proveedor"}),(0,m.jsxs)(t.A.Select,{name:"num_proveedor",value:b.num_proveedor,onChange:M,children:[(0,m.jsx)("option",{value:"",children:"Seleccione un proveedor"}),p.map((e=>(0,m.jsx)("option",{value:e.cod,children:e.desc},e.cod)))]})]})}),(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"cod_unidad",children:[(0,m.jsx)(t.A.Label,{children:"Unidad"}),(0,m.jsxs)(t.A.Select,{name:"cod_unidad",value:b.cod_unidad,onChange:M,required:!0,children:[(0,m.jsx)("option",{value:"",children:"Seleccione una unidad"}),A.map((e=>(0,m.jsx)("option",{value:e.cod,children:e.desc},e.cod)))]})]})}),(0,m.jsx)(n.A,{md:6,className:"mb-3",children:(0,m.jsxs)(t.A.Group,{controlId:"cod_categoria",children:[(0,m.jsx)(t.A.Label,{children:"Categor\xeda"}),(0,m.jsxs)(t.A.Select,{name:"cod_categoria",value:b.cod_categoria,onChange:M,children:[(0,m.jsx)("option",{value:"",children:"Seleccione una categor\xeda"}),_.map((e=>(0,m.jsx)("option",{value:e.cod,children:e.desc},e.cod)))]})]})})]})}),(0,m.jsxs)(h.A.Footer,{children:[(0,m.jsx)(l.A,{type:"submit",variant:"outline-primary",children:" Guardar "}),(0,m.jsx)(l.A,{variant:"outline-secondary",onClick:T,children:" Cancelar "})]})]})]}),(0,m.jsxs)(h.A,{show:P,onHide:R,children:[(0,m.jsx)(h.A.Header,{closeButton:!0,children:(0,m.jsx)(h.A.Title,{children:"Eliminar Producto"})}),(0,m.jsxs)(h.A.Body,{children:[" \xbfEst\xe1s seguro de que deseas eliminar el producto:"," "," ",(0,m.jsx)("strong",{children:k&&k.des_producto}),"? "]}),(0,m.jsxs)(h.A.Footer,{children:[(0,m.jsx)(l.A,{variant:"danger",onClick:async()=>{await(async e=>(0,x.A)(`/api/v1/almacen/productos/${e}`,"DELETE"))(k.num_producto),G(),S(!1)},children:" Eliminar "}),(0,m.jsx)(l.A,{variant:"secondary",onClick:R,children:" Cancelar "})]})]})]})}},7491:(e,d,c)=>{c.d(d,{A:()=>_});var s=c(8139),r=c.n(s),o=c(5043),a=c(7852),n=c(6161),l=c(579);const t=o.forwardRef(((e,d)=>{let{active:c=!1,disabled:s=!1,className:o,style:a,activeLabel:t="(current)",children:i,linkStyle:u,linkClassName:h,as:x=n.A,...m}=e;const j=c||s?"span":x;return(0,l.jsx)("li",{ref:d,style:a,className:r()(o,"page-item",{active:c,disabled:s}),children:(0,l.jsxs)(j,{className:r()("page-link",h),style:u,...m,children:[i,c&&t&&(0,l.jsx)("span",{className:"visually-hidden",children:t})]})})}));t.displayName="PageItem";const i=t;function u(e,d){let c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;const s=o.forwardRef(((e,s)=>{let{children:r,...o}=e;return(0,l.jsxs)(t,{...o,ref:s,children:[(0,l.jsx)("span",{"aria-hidden":"true",children:r||d}),(0,l.jsx)("span",{className:"visually-hidden",children:c})]})}));return s.displayName=e,s}const h=u("First","\xab"),x=u("Prev","\u2039","Previous"),m=u("Ellipsis","\u2026","More"),j=u("Next","\u203a"),p=u("Last","\xbb"),A=o.forwardRef(((e,d)=>{let{bsPrefix:c,className:s,size:o,...n}=e;const t=(0,a.oU)(c,"pagination");return(0,l.jsx)("ul",{ref:d,...n,className:r()(s,t,o&&`${t}-${o}`)})}));A.displayName="Pagination";const _=Object.assign(A,{First:h,Prev:x,Ellipsis:m,Item:i,Next:j,Last:p})}}]);
//# sourceMappingURL=835.6c7e97ab.chunk.js.map